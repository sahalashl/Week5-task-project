const express=require('express');const router=express.Router();const Job=require('../models/Job');const {auth,role}=require('../middleware/auth');router.post('/',auth,role(['user','admin']),async(req,res)=>{try{const job=new Job({...req.body,createdBy:req.user._id});await job.save();res.json(job);}catch(e){res.status(500).json({msg:'err',error:e.message});}});router.get('/',async(req,res)=>{const jobs=await Job.find({status:'approved'}).populate('createdBy','name email');res.json(jobs);});router.get('/:id',async(req,res)=>{const job=await Job.findById(req.params.id).populate('createdBy','name email');if(!job)return res.status(404).json({msg:'Not found'});res.json(job);});module.exports=router;
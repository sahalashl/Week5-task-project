const express=require('express');const router=express.Router();const Job=require('../models/Job');const User=require('../models/User');const {auth,role}=require('../middleware/auth');router.get('/jobs',auth,role(['admin']),async(req,res)=>{const jobs=await Job.find().populate('createdBy','name email');res.json(jobs);});router.post('/jobs/:id/approve',auth,role(['admin']),async(req,res)=>{const job=await Job.findById(req.params.id);if(!job)return res.status(404).json({msg:'Not found'});job.status='approved';await job.save();res.json(job);});router.get('/users',auth,role(['admin']),async(req,res)=>{const users=await User.find().select('-password');res.json(users);});module.exports=router;